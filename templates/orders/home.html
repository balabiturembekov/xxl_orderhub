{% extends 'base.html' %}
{% load i18n %}


{% block title %}–ì–ª–∞–≤–Ω–∞—è - XXL OrderHub{% endblock %}

{% block content %}
{% if user.is_authenticated %}
<!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–ª–æ–∫ -->
<div class="row mb-4">
    <div class="col-12">
        <div class="jumbotron bg-gradient-primary text-white p-4 rounded">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="display-6 mb-2">{% trans "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å" %}, {{ user.username }}!</h1>
                    <p class="lead mb-0">{% trans "–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞." %}</p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="d-grid gap-2 d-md-block">
                        <a href="{% url 'create_order' %}" class="btn btn-light btn-lg">
                            ‚ûï {% trans "–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑" %}
                        </a>
                        <a href="{% url 'order_list' %}" class="btn btn-outline-light btn-lg">
                            üìã {% trans "–í—Å–µ –∑–∞–∫–∞–∑—ã" %}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card bg-primary text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h4 class="card-title">{{ total_orders }}</h4>
                        <p class="card-text">{% trans "–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤" %}</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fas fa-shopping-cart fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-warning text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h4 class="card-title">{{ uploaded_orders }}</h4>
                        <p class="card-text">{% trans "–ó–∞–≥—Ä—É–∂–µ–Ω–æ" %}</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fas fa-upload fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-info text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h4 class="card-title">{{ sent_orders }}</h4>
                        <p class="card-text">{% trans "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ" %}</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fas fa-paper-plane fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-success text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h4 class="card-title">{{ completed_orders }}</h4>
                        <p class="card-text">{% trans "–ó–∞–≤–µ—Ä—à–µ–Ω–æ" %}</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fas fa-check-circle fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –í–∏–¥–∂–µ—Ç—ã -->
<div class="row">
    <!-- –ó–∞–∫–∞–∑—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è -->
    {% if urgent_orders %}
    <div class="col-md-6 mb-4">
        <div class="card border-warning">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">‚ö†Ô∏è {% trans "–ó–∞–∫–∞–∑—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è" %}</h5>
            </div>
            <div class="card-body">
                {% for order in urgent_orders %}
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <div>
                        <strong>{{ order.title }}</strong>
                        <br><small class="text-muted">{{ order.factory.name }}</small>
                    </div>
                    <div class="text-end">
                        <span class="badge bg-warning">{{ order.days_since_upload }} {% trans "–¥–Ω–µ–π" %}</span>
                        <br><a href="{% url 'order_detail' order.pk %}" class="btn btn-sm btn-outline-primary">{% trans "–ü—Ä–æ—Å–º–æ—Ç—Ä" %}</a>
                    </div>
                </div>
                {% if not forloop.last %}<hr>{% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- –¢–æ–ø —Ñ–∞–±—Ä–∏–∫ -->
    {% if factory_stats %}
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üè≠ {% trans "–¢–æ–ø —Ñ–∞–±—Ä–∏–∫" %}</h5>
            </div>
            <div class="card-body">
                {% for factory in factory_stats %}
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <div>
                        <strong>{{ factory.factory__name }}</strong>
                        <br><small class="text-muted">{{ factory.factory__country__name }}</small>
                    </div>
                    <div class="text-end">
                        <span class="badge bg-primary">{{ factory.count }} {% trans "–∑–∞–∫–∞–∑–æ–≤" %}</span>
                    </div>
                </div>
                {% if not forloop.last %}<hr>{% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º -->
    {% if country_stats %}
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üåç {% trans "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º" %}</h5>
            </div>
            <div class="card-body">
                {% for country in country_stats %}
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <div>
                        <strong>{{ country.factory__country__name }}</strong>
                    </div>
                    <div class="text-end">
                        <span class="badge bg-info">{{ country.count }} {% trans "–∑–∞–∫–∞–∑–æ–≤" %}</span>
                    </div>
                </div>
                {% if not forloop.last %}<hr>{% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã -->
    {% if recent_orders %}
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üìã {% trans "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã" %}</h5>
            </div>
            <div class="card-body">
                {% for order in recent_orders %}
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <div>
                        <strong>{{ order.title }}</strong>
                        <br><small class="text-muted">{{ order.factory__name }}</small>
                    </div>
                    <div class="text-end">
                        <span class="badge bg-{% if order.status == 'uploaded' %}warning{% elif order.status == 'sent' %}info{% elif order.status == 'completed' %}success{% else %}secondary{% endif %}">
                            {% if order.status == 'uploaded' %}{% trans "–ó–∞–≥—Ä—É–∂–µ–Ω" %}
                            {% elif order.status == 'sent' %}{% trans "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω" %}
                            {% elif order.status == 'invoice_received' %}{% trans "–ò–Ω–≤–æ–π—Å –ø–æ–ª—É—á–µ–Ω" %}
                            {% elif order.status == 'completed' %}{% trans "–ó–∞–≤–µ—Ä—à–µ–Ω" %}
                            {% elif order.status == 'cancelled' %}{% trans "–û—Ç–º–µ–Ω–µ–Ω" %}
                            {% else %}{{ order.status }}{% endif %}
                        </span>
                        <br><a href="{% url 'order_detail' order.id %}" class="btn btn-sm btn-outline-primary">{% trans "–ü—Ä–æ—Å–º–æ—Ç—Ä" %}</a>
                    </div>
                </div>
                {% if not forloop.last %}<hr>{% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è -->
{% if overdue_orders > 0 %}
<div class="row">
    <div class="col-12">
        <div class="alert alert-warning" role="alert">
            <h4 class="alert-heading">‚ö†Ô∏è {% trans "–í–Ω–∏–º–∞–Ω–∏–µ!" %}</h4>
            <p>{% trans "–£ –≤–∞—Å –µ—Å—Ç—å" %} <strong>{{ overdue_orders }}</strong> {% trans "–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –≤–Ω–∏–º–∞–Ω–∏—è." %}</p>
            <hr>
            <p class="mb-0">
                <a href="{% url 'order_list' %}?status=uploaded" class="btn btn-warning">{% trans "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã" %}</a>
            </p>
        </div>
    </div>
</div>
{% endif %}

{% else %}
<!-- –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -->
<!-- Hero Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="jumbotron bg-gradient-primary text-white p-5 rounded text-center">
            <h1 class="display-4 mb-4">{% trans "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ XXL OrderHub!" %}</h1>
            <p class="lead mb-4">{% trans "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞" %}</p>
            <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <a class="btn btn-light btn-lg px-4" href="{% url 'login' %}" role="button">
                    <i class="fas fa-sign-in-alt me-2"></i>{% trans "–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É" %}
                </a>
                <a class="btn btn-outline-light btn-lg px-4" href="{% url 'signup' %}" role="button">
                    <i class="fas fa-user-plus me-2"></i>{% trans "–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç" %}
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-5">{% trans "–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã" %}</h2>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center border-0 shadow-sm">
            <div class="card-body p-4">
                <div class="mb-3">
                    <i class="fas fa-shopping-cart fa-3x text-primary"></i>
                </div>
                <h5 class="card-title">{% trans "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏" %}</h5>
                <p class="card-text text-muted">
                    {% trans "–°–æ–∑–¥–∞–≤–∞–π—Ç–µ, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –∑–∞–∫–∞–∑–∞–º–∏ –≤ –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ. –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞." %}
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center border-0 shadow-sm">
            <div class="card-body p-4">
                <div class="mb-3">
                    <i class="fas fa-industry fa-3x text-success"></i>
                </div>
                <h5 class="card-title">{% trans "–ë–∞–∑–∞ —Ñ–∞–±—Ä–∏–∫" %}</h5>
                <p class="card-text text-muted">
                    {% trans "–í–µ–¥–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ñ–∞–±—Ä–∏–∫ –∏ —Å—Ç—Ä–∞–Ω. –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∏ –≤—ã–±–æ—Ä –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è –≤–∞—à–∏—Ö –∑–∞–∫–∞–∑–æ–≤." %}
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center border-0 shadow-sm">
            <div class="card-body p-4">
                <div class="mb-3">
                    <i class="fas fa-bell fa-3x text-warning"></i>
                </div>
                <h5 class="card-title">{% trans "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" %}</h5>
                <p class="card-text text-muted">
                    {% trans "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞–∫–∞–∑–æ–≤. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞—Ö –∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö." %}
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center border-0 shadow-sm">
            <div class="card-body p-4">
                <div class="mb-3">
                    <i class="fas fa-chart-bar fa-3x text-info"></i>
                </div>
                <h5 class="card-title">{% trans "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" %}</h5>
                <p class="card-text text-muted">
                    {% trans "–ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã –ø–æ –∑–∞–∫–∞–∑–∞–º, —Ñ–∞–±—Ä–∏–∫–∞–º –∏ —Å—Ç—Ä–∞–Ω–∞–º. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π." %}
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center border-0 shadow-sm">
            <div class="card-body p-4">
                <div class="mb-3">
                    <i class="fas fa-shield-alt fa-3x text-danger"></i>
                </div>
                <h5 class="card-title">{% trans "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" %}</h5>
                <p class="card-text text-muted">
                    {% trans "–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π." %}
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center border-0 shadow-sm">
            <div class="card-body p-4">
                <div class="mb-3">
                    <i class="fas fa-globe fa-3x text-secondary"></i>
                </div>
                <h5 class="card-title">{% trans "–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å" %}</h5>
                <p class="card-text text-muted">
                    {% trans "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –Ω–µ–º–µ—Ü–∫–æ–º —è–∑—ã–∫–∞—Ö." %}
                </p>
            </div>
        </div>
    </div>
</div>

<!-- How it works Section -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-5">{% trans "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç" %}</h2>
    </div>
    
    <div class="col-md-3 mb-4">
        <div class="text-center">
            <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                <span class="h4 mb-0">1</span>
            </div>
            <h5>{% trans "–°–æ–∑–¥–∞–π—Ç–µ –∑–∞–∫–∞–∑" %}</h5>
            <p class="text-muted">{% trans "–ó–∞–≥—Ä—É–∑–∏—Ç–µ Excel —Ñ–∞–π–ª —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–±—Ä–∏–∫—É" %}</p>
        </div>
    </div>
    
    <div class="col-md-3 mb-4">
        <div class="text-center">
            <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                <span class="h4 mb-0">2</span>
            </div>
            <h5>{% trans "–û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ —Ñ–∞–±—Ä–∏–∫—É" %}</h5>
            <p class="text-muted">{% trans "–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –∑–∞–∫–∞–∑ –Ω–∞ email —Ñ–∞–±—Ä–∏–∫–∏" %}</p>
        </div>
    </div>
    
    <div class="col-md-3 mb-4">
        <div class="text-center">
            <div class="bg-info text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                <span class="h4 mb-0">3</span>
            </div>
            <h5>{% trans "–ü–æ–ª—É—á–∏—Ç–µ –∏–Ω–≤–æ–π—Å" %}</h5>
            <p class="text-muted">{% trans "–ó–∞–≥—Ä—É–∑–∏—Ç–µ PDF –∏–Ω–≤–æ–π—Å –æ—Ç —Ñ–∞–±—Ä–∏–∫–∏ –≤ —Å–∏—Å—Ç–µ–º—É" %}</p>
        </div>
    </div>
    
    <div class="col-md-3 mb-4">
        <div class="text-center">
            <div class="bg-warning text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                <span class="h4 mb-0">4</span>
            </div>
            <h5>{% trans "–ó–∞–≤–µ—Ä—à–∏—Ç–µ –∑–∞–∫–∞–∑" %}</h5>
            <p class="text-muted">{% trans "–û—Ç–º–µ—Ç—å—Ç–µ –∑–∞–∫–∞–∑ –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞" %}</p>
        </div>
    </div>
</div>

<!-- Statistics Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="bg-light p-5 rounded text-center">
            <h2 class="mb-4">{% trans "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã" %}</h2>
            <div class="row">
                <div class="col-md-3 mb-3">
                    <div class="h3 text-primary mb-1">{{ total_orders|default:"0" }}</div>
                    <div class="text-muted">{% trans "–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤" %}</div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="h3 text-success mb-1">{{ total_factories|default:"0" }}</div>
                    <div class="text-muted">{% trans "–§–∞–±—Ä–∏–∫ –≤ –±–∞–∑–µ" %}</div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="h3 text-info mb-1">{{ total_countries|default:"0" }}</div>
                    <div class="text-muted">{% trans "–°—Ç—Ä–∞–Ω" %}</div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="h3 text-warning mb-1">{{ active_users|default:"0" }}</div>
                    <div class="text-muted">{% trans "–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" %}</div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endif %}
{% endblock %}
